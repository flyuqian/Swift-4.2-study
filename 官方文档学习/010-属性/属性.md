#### 属性

---

```html
属性 可以将值与特定类、结构体或者枚举类型相关联。存储属性将常量和变量值存储为实例的一部分，而计算属性则是通过计算得到一个值（而不是存储值）。计算属性适用于类、结构体和枚举类型，而存储属性只适用于类和结构体类型。

存储和计算属性通常都与特定类型的实例相关联。但是，属性也可以与类型本身相关联，这种属性称为类型属性。

此外，你还可以定义属性观察器以监视属性值的更改，并使用自定义的操作对其进行响应。你既可以将属性观察器添加到自己定义的存储属性中，也可以添加到从父类继承来的属性中。
```

- 储存属性
  - 一个存储在特定的类或结构体中的常量或变量， 可以提供默认值
- 如果结构体被声明为一个常量，其属性也会标记为一个常量
- lazy修饰的 延迟存储属性，直到第一次修饰时才进行计算、、必须声明为var，因为常量属性必须在实例初始化之前就获得一个值
  - 如果被 `lazy` 修饰符所标记的属性，同时被多个线程访问，并且该属性尚未被初始化，则无法保证该属性仅被初始化一次。



- 计算属性 
  - `它们会提供了一个 getter 方法和一个可选的 setter 方法来间接读取和设置其他属性和值`
  - 只有 getter 方法但没有 setter 方法的计算属性称为 *只读计算属性* 
  - 你必须使用 `var` 关键字来声明计算属性（包括只读计算属性），这是因为它们的值是不固定。
  - 可以通过删除 `get` 关键字及其大括号来简化只读计算属性的声明


- 属性观察器
  - 在存储新值之前调用 willSet
    - 新值为 newValue
  - 在存储新值之后立即调用 didSet
    - 旧值为 oldValue
  - 如果将具有观察器的属性作为 in-out 参数传递给函数，则 `willSet` 和 `didSet` 观察器一定会被调用。这是因为 in-out 参数是 copy-in copy-out 内存模型：值一定会在函数结束后写回属性



- 全局和局部变量
  - 上面描述的用于计算和观察属性的功能也可用于 *全局变量* 和 *局部变量* 
  - 全局变量是指在任何函数、方法、闭包或类型上下文之外定义的变量。局部变量是指在函数、方法或闭包上下文中定义的变量。
  - 全局常量和变量总是被延迟计算，与 [延迟存储属性](https://docs.swift.org/swift-book/LanguageGuide/Properties.html#ID257) 类似，但不需要标记 lazy
- 类型属性
  - 必须始终未类型存储提供默认值， 因为类型本身没有初始化方法来给存储类型属性赋值，存储类型属性在首次访问时被初始化。它们会被保证只初始化一次，即使同时由多个线程访问。请注意你并不需要用 `lazy` 修饰符标记它们。
  - 使用 static、class标记